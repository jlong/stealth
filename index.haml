- @title = "Stealth Canvas Test"

- content_for :meta do
  %style{:type=>"text/css"}
    :sass
      body
        margin: 0
        padding: 0
        overflow: hidden
      canvas
        background: black
        padding: 0
        margin: 0
        position: absolute
  :javascript
    function resize() {
      $canvas.setStyle({
        width: document.viewport.getWidth() + 'px',
        height: document.viewport.getHeight() + 'px'
      });
    }
    function tick() {
      var ctx = $canvas.getContext('2d');
      for (var i = 0; i < 6; i++){
        for (var j = 0; j < 6; j++){
          ctx.strokeStyle = 'rgb(0,' + Math.floor(255-42.5*i) + ',' + 
                           Math.floor(255-42.5*j) + ')';
          ctx.beginPath();
          ctx.arc(12.5+j*25,12.5+i*25,10,0,Math.PI*2,true);
          ctx.stroke();
        }
      }
    }
    Event.observe(window, 'resize', resize);
    Event.observe(document, 'dom:loaded', function() {
      $canvas = $('canvas');
      resize();
      tick();
    });

%canvas#canvas